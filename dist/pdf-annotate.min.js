!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PDFAnnotate=t():e.PDFAnnotate=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(8),s=i(a),u=n(10),d=i(u),l=n(28),c=i(l),h=n(35),f=i(h);n(36);t["default"]={initColorPicker:f["default"],StoreAdapter:o["default"],LocalStoreAdapter:s["default"],__storeAdapter:new o["default"],getStoreAdapter:function(){return this.__storeAdapter},setStoreAdapter:function(e){this.__storeAdapter=e},UI:c["default"],render:d["default"],getAnnotations:function(e,t){var n;return(n=this.getStoreAdapter()).getAnnotations.apply(n,arguments)}},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=i(a),u=n(4),d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),Object.keys(n).forEach(function(e){"function"==typeof n[e]&&"function"==typeof t[e]&&(t[e]=n[e])})}return o(e,[{key:"__getAnnotations",value:function(e,t){(0,s["default"])("getAnnotations")}},{key:"getAnnotation",value:function(e,t){(0,s["default"])("getAnnotation")}},{key:"__addAnnotation",value:function(e,t,n){(0,s["default"])("addAnnotation")}},{key:"__editAnnotation",value:function(e,t,n){(0,s["default"])("editAnnotation")}},{key:"__deleteAnnotation",value:function(e,t){(0,s["default"])("deleteAnnotation")}},{key:"getComments",value:function(e,t){(0,s["default"])("getComments")}},{key:"__addComment",value:function(e,t,n){(0,s["default"])("addComment")}},{key:"__deleteComment",value:function(e,t){(0,s["default"])("deleteComment")}},{key:"getAnnotations",get:function(){return this.__getAnnotations},set:function(e){this.__getAnnotations=function(t,n){return e.apply(void 0,arguments).then(function(e){return e.annotations&&e.annotations.forEach(function(e){e.documentId=t}),e})}}},{key:"addAnnotation",get:function(){return this.__addAnnotation},set:function(e){this.__addAnnotation=function(t,n,i){return e.apply(void 0,arguments).then(function(e){return(0,u.fireEvent)("annotation:add",t,n,e),e})}}},{key:"editAnnotation",get:function(){return this.__editAnnotation},set:function(e){this.__editAnnotation=function(t,n,i){return e.apply(void 0,arguments).then(function(e){return(0,u.fireEvent)("annotation:edit",t,n,e),e})}}},{key:"deleteAnnotation",get:function(){return this.__deleteAnnotation},set:function(e){this.__deleteAnnotation=function(t,n){return e.apply(void 0,arguments).then(function(e){return e&&(0,u.fireEvent)("annotation:delete",t,n),e})}}},{key:"addComment",get:function(){return this.__addComment},set:function(e){this.__addComment=function(t,n,i){return e.apply(void 0,arguments).then(function(e){return(0,u.fireEvent)("comment:add",t,n,e),e})}}},{key:"deleteComment",get:function(){return this.__deleteComment},set:function(e){this.__deleteComment=function(t,n){return e.apply(void 0,arguments).then(function(e){return e&&(0,u.fireEvent)("comment:delete",t,n),e})}}}]),e}();t["default"]=d,e.exports=t["default"]},function(e,t){"use strict";function n(e){throw new Error(e+" is not implemented")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){l.emit.apply(l,arguments)}function o(){l.on.apply(l,arguments)}function a(){l.removeListener.apply(l,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.fireEvent=r,t.addEventListener=o,t.removeEventListener=a;var s=n(5),u=i(s),d=n(6),l=new u["default"],c=void 0;document.addEventListener("click",function(e){if((0,d.findSVGAtPoint)(e.clientX,e.clientY)){var t=(0,d.findAnnotationAtPoint)(e.clientX,e.clientY);c&&c!==t&&l.emit("annotation:blur",c,e),t&&l.emit("annotation:click",t,e),c=t}})},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,u,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),d=n.slice(),r=d.length,u=0;u<r;u++)d[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){for(var t=e;(t=t.parentNode)&&t!==document;)if("SVG"===t.nodeName.toUpperCase()&&"true"===t.getAttribute("data-pdf-annotate-container"))return t;return null}function o(e,t){for(var n=document.querySelectorAll('svg[data-pdf-annotate-container="true"]'),i=0,r=n.length;i<r;i++){var o=n[i],a=o.getBoundingClientRect();if(s(e,t,a))return o}return null}function a(e,t){var n=o(e,t);if(n){for(var i=n.querySelectorAll("[data-pdf-annotate-type]"),r=0,a=i.length;r<a;r++){var d=i[r];if(s(e,t,u(d)))return d}return null}}function s(e,t,n){return t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right}function u(e){var t=d(e),n=f(e),i=n.offsetLeft,r=n.offsetTop;return{top:t.top+r,left:t.left+i,right:t.right+i,bottom:t.bottom+r}}function d(e){var t=0,n=0,i=0,r=0,a=e.getBoundingClientRect(),s=16;switch(e.nodeName.toLowerCase()){case"path":var u=void 0,d=void 0,c=void 0,h=void 0;e.getAttribute("d").replace(/Z/,"").split("M").splice(1).forEach(function(e){var t=e.split(" ").map(function(e){return parseInt(e,10)});("undefined"==typeof u||t[0]<u)&&(u=t[0]),("undefined"==typeof d||t[2]>d)&&(d=t[2]),("undefined"==typeof c||t[1]<c)&&(c=t[1]),("undefined"==typeof h||t[3]>h)&&(h=t[3])}),t=h-c,n=d-u,i=u,r=c;break;case"line":t=parseInt(e.getAttribute("y2"),10)-parseInt(e.getAttribute("y1"),10),n=parseInt(e.getAttribute("x2"),10)-parseInt(e.getAttribute("x1"),10),i=parseInt(e.getAttribute("x1"),10),r=parseInt(e.getAttribute("y1"),10),0===t&&(t+=s,r-=s/2);break;case"text":t=a.height,n=a.width,i=parseInt(e.getAttribute("x"),10),r=parseInt(e.getAttribute("y"),10)-t;break;case"g":var p=f(e),v=p.offsetLeft,g=p.offsetTop;t=a.height,n=a.width,i=a.left-v,r=a.top-g,"strikeout"===e.getAttribute("data-pdf-annotate-type")&&(t+=s,r-=s/2);break;case"rect":case"svg":t=parseInt(e.getAttribute("height"),10),n=parseInt(e.getAttribute("width"),10),i=parseInt(e.getAttribute("x"),10),r=parseInt(e.getAttribute("y"),10)}var m={top:r,left:i,width:n,height:t,right:i+n,bottom:r+t};return["svg","g"].includes(e.nodeName.toLowerCase())||(m=l(o(a.left,a.top),m)),m}function l(e,t){var n={},i=g(e),r=i.viewport;return Object.keys(t).forEach(function(e){n[e]=t[e]*r.scale}),n}function c(e,t){var n={},i=g(e),r=i.viewport;return Object.keys(t).forEach(function(e){n[e]=t[e]/r.scale}),n}function h(e){for(var t=0,n=0,i=e;(i=i.parentNode)&&i!==document;)t+=i.scrollTop,n+=i.scrollLeft;return{scrollTop:t,scrollLeft:n}}function f(e){for(var t=e;(t=t.parentNode)&&t!==document&&"SVG"!==t.nodeName.toUpperCase(););var n=t.getBoundingClientRect();return{offsetLeft:n.left,offsetTop:n.top}}function p(){b.parentNode||document.head.appendChild(b)}function v(){b.parentNode&&b.parentNode.removeChild(b)}function g(e){return{documentId:e.getAttribute("data-pdf-annotate-document"),pageNumber:parseInt(e.getAttribute("data-pdf-annotate-page"),10),viewport:JSON.parse(e.getAttribute("data-pdf-annotate-viewport"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.BORDER_COLOR=void 0,t.findSVGContainer=r,t.findSVGAtPoint=o,t.findAnnotationAtPoint=a,t.pointIntersectsRect=s,t.getOffsetAnnotationRect=u,t.getAnnotationRect=d,t.scaleUp=l,t.scaleDown=c,t.getScroll=h,t.getOffset=f,t.disableUserSelect=p,t.enableUserSelect=v,t.getMetadata=g;var m=n(7),y=i(m),b=(t.BORDER_COLOR="#00BFFF",(0,y["default"])({body:{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}}));b.setAttribute("data-pdf-annotate-user-select","true")},function(e,t){function n(e,t){return e+" {\n"+i(t)+"\n}"}function i(e){return Object.keys(e).map(function(t){return r(t,e[t])}).join("\n")}function r(e,t){return isNaN(t)||0==t||(t+="px"),o(e)+": "+t+";"}function o(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}e.exports=function(e){var t=document.createElement("style"),i=Object.keys(e).map(function(t){return n(t,e[t])}).join("\n");return t.setAttribute("type","text/css"),t.appendChild(document.createTextNode(i)),t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return JSON.parse(localStorage.getItem(e+"/annotations"))||[]}function u(e,t){localStorage.setItem(e+"/annotations",JSON.stringify(t))}function d(e,t){for(var n=-1,i=s(e),r=0,o=i.length;r<o;r++)if(i[r].uuid===t){n=r;break}return n}Object.defineProperty(t,"__esModule",{value:!0});var l=n(9),c=i(l),h=n(2),f=i(h),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{getAnnotations:function(e,t){return new Promise(function(n,i){var r=s(e).filter(function(e){return e.page===t&&"Annotation"===e["class"]});n({documentId:e,pageNumber:t,annotations:r})})},getAnnotation:function(e,t){return Promise.resolve(s(e)[d(e,t)])},addAnnotation:function(e,t,n){return new Promise(function(i,r){n["class"]="Annotation",n.uuid=(0,c["default"])(),n.page=t;var o=s(e);o.push(n),u(e,o),i(n)})},editAnnotation:function(e,t,n){return new Promise(function(i,r){var o=s(e);o[d(e,t)]=n,u(e,o),i(n)})},deleteAnnotation:function(e,t){return new Promise(function(n,i){var r=d(e,t);if(r>-1){var o=s(e);o.splice(r,1),u(e,o)}n(!0)})},getComments:function(e,t){return new Promise(function(n,i){n(s(e).filter(function(e){return"Comment"===e["class"]&&parseInt(e.annotation)===parseInt(t)}))})},addComment:function(e,t,n){return new Promise(function(i,r){var o={"class":"Comment",uuid:(0,c["default"])(),annotation:t,content:n},a=s(e);a.push(o),u(e,a),i(o)})},deleteComment:function(e,t){return new Promise(function(n,i){s(e);for(var r=-1,o=s(e),a=0,d=o.length;a<d;a++)if(o[a].uuid===t){r=a;break}r>-1&&(o.splice(r,1),u(e,o)),n(!0)})}}))}return a(t,e),t}(f["default"]);t["default"]=p,e.exports=t["default"]},function(e,t){"use strict";function n(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}function i(){return o.replace(r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=/[xy]/g,o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return new Promise(function(i,r){return e.innerHTML="",e.setAttribute("data-pdf-annotate-container",!0),e.setAttribute("data-pdf-annotate-viewport",JSON.stringify(t)),e.removeAttribute("data-pdf-annotate-document"),e.removeAttribute("data-pdf-annotate-page"),n?(e.setAttribute("data-pdf-annotate-document",n.documentId),e.setAttribute("data-pdf-annotate-page",n.pageNumber),Array.isArray(n.annotations)&&0!==n.annotations.length?(n.annotations.forEach(function(n){(0,s["default"])(e,n,t)}),void i(e)):i(e)):i(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(1),a=(i(o),n(11)),s=i(a),u=n(20);i(u);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=void 0,n=void 0;switch(e.rotation%360){case 0:t=n=0;break;case 90:t=0,n=e.width/e.scale*-1;break;case 180:t=e.width/e.scale*-1,n=e.height/e.scale*-1;break;case 270:t=e.height/e.scale*-1,n=0}return{x:t,y:n}}function o(e,t){var n=r(t);if(e.setAttribute("transform","scale("+t.scale+") rotate("+t.rotation+") translate("+n.x+", "+n.y+")"),!b&&"svg"===e.nodeName.toLowerCase()){e.setAttribute("x",parseInt(e.getAttribute("x"),10)*t.scale),e.setAttribute("y",parseInt(e.getAttribute("y"),10)*t.scale);var i=parseInt(e.getAttribute("x",10)),a=parseInt(e.getAttribute("y",10)),s=parseInt(e.getAttribute("width"),10),d=parseInt(e.getAttribute("height"),10),l=e.querySelector("path"),c=l.parentNode;switch([e,c,l,e.querySelector("rect")].forEach(function(e){e.setAttribute("width",parseInt(e.getAttribute("width"),10)*t.scale),e.setAttribute("height",parseInt(e.getAttribute("height"),10)*t.scale)}),o(l,(0,u["default"])({},t,{scale:1})),t.rotation%360){case 90:e.setAttribute("x",t.width-a-s),e.setAttribute("y",i),c.setAttribute("x",1),c.setAttribute("y",0);break;case 180:e.setAttribute("x",t.width-i-s),e.setAttribute("y",t.height-a-d),c.setAttribute("y",2);break;case 270:e.setAttribute("x",a),e.setAttribute("y",t.height-i-d),c.setAttribute("x",-1),c.setAttribute("y",0)}}return e}function a(e,t,n){n||(n=JSON.parse(e.getAttribute("data-pdf-annotate-viewport")));var i=void 0;switch(t.type){case"area":case"highlight":i=(0,g["default"])(t);break;case"strikeout":i=(0,l["default"])(t);break;case"point":i=(0,p["default"])(t);break;case"textbox":i=(0,y["default"])(t);break;case"drawing":i=(0,h["default"])(t)}return i&&(i.setAttribute("data-pdf-annotate-id",t.uuid),i.setAttribute("data-pdf-annotate-type",t.type),i.setAttribute("aria-hidden",!0),e.appendChild(o(i,n))),i}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=n(12),u=i(s),d=n(13),l=i(d),c=n(16),h=i(c),f=n(17),p=i(f),v=n(18),g=i(v),m=n(19),y=i(m),b=/firefox/i.test(navigator.userAgent);e.exports=t["default"]},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(e,t){for(var i,s,u=n(e),d=1;d<arguments.length;d++){i=Object(arguments[d]);for(var l in i)o.call(i,l)&&(u[l]=i[l]);if(r){s=r(i);for(var c=0;c<s.length;c++)a.call(i,s[c])&&(u[s[c]]=i[s[c]])}}return u}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return(0,a["default"])(t,{stroke:(0,u["default"])(e.color||"#f00"),strokeWidth:1}),e.rectangles.forEach(function(e){var n=document.createElementNS("http://www.w3.org/2000/svg","line");(0,a["default"])(n,{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y}),t.appendChild(n)}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(14),a=i(o),s=n(15),u=i(s);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){Object.keys(t).forEach(function(n){e.setAttribute(o(n),t[n])})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var i=/[A-Z]/g,r=["viewBox"],o=function(e){return r.indexOf(e)===-1&&(e=e.replace(i,function(e){return"-"+e.toLowerCase()})),e};e.exports=t["default"]},function(e,t){"use strict";function n(e){return i.test(e)&&(e="#"+e),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var i=/^([a-f0-9]{6}|[a-f0-9]{3})$/i;e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){for(var t=[],n=document.createElementNS("http://www.w3.org/2000/svg","path"),i=0,r=e.lines.length;i<r;i++){var o=e.lines[i],s=e.lines[i+1];s&&t.push("M"+o[0]+" "+o[1]+" "+s[0]+" "+s[1])}return(0,a["default"])(n,{d:t.join(" ")+"Z",stroke:(0,u["default"])(e.color||"#000"),strokeWidth:e.width||1,fill:"none"}),n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(14),a=i(o),s=n(15),u=i(s);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return(0,a["default"])(t,{width:s,height:s,x:e.x,y:e.y}),(0,a["default"])(n,{width:s,height:s,x:0,y:.05*s*-1,viewBox:"0 0 1000 1000"}),(0,a["default"])(i,{width:s,height:s,stroke:"#000",fill:"#ff0"}),(0,a["default"])(r,{d:u,strokeWidth:50,stroke:"#000",fill:"#fff"}),n.appendChild(r),t.appendChild(i),t.appendChild(n),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(14),a=i(o),s=25,u="M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z";e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if("highlight"===e.type){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return(0,s["default"])(t,{fill:(0,d["default"])(e.color||"#ff0"),fillOpacity:.2}),e.rectangles.forEach(function(e){t.appendChild(o(e))}),t}var n=o(e);return(0,s["default"])(n,{stroke:(0,d["default"])(e.color||"#f00"),fill:"none"}),n}function o(e){var t=document.createElementNS("http://www.w3.org/2000/svg","rect");return(0,s["default"])(t,{x:e.x,y:e.y,width:e.width,height:e.height}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(14),s=i(a),u=n(15),d=i(u);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=document.createElementNS("http://www.w3.org/2000/svg","text");return(0,a["default"])(t,{x:e.x,y:e.y+parseInt(e.size,10),fill:(0,u["default"])(e.color||"#000"),fontSize:e.size}),t.innerHTML=e.content,t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(14),a=i(o),s=n(15),u=i(s);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){e=Array.isArray(e)?e:[],Object.keys(h).forEach(function(t){var n=h[t];e.filter(function(e){return e.type===t}).sort(n).forEach(function(e,t){return(0,d["default"])(e,t+1)})})}function o(e,t){return e.y<t.y?e.x-t.x:1}function a(e,t){return o(e.rectangles[0],t.rectangles[0])}function s(e,t){var n=e.lines[0],i=t.lines[0];return o({x:n[0],y:n[1]},{x:i[0],y:i[1]})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=n(21),d=i(u),l=n(27),c=i(l);(0,c["default"])();var h={highlight:a,strikeout:a,drawing:s,textbox:o,point:o,area:o};e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e.type){case"highlight":case"strikeout":var n=e.rectangles,i=n[0],r=n[n.length-1];(0,l["default"])((0,a["default"])("Begin "+e.type+" annotation "+t,e.uuid),i.x,i.y,e.page,!0),(0,l["default"])((0,a["default"])("End "+e.type+" annotation "+t,e.uuid+"-end"),r.x+r.width,r.y,e.page,!1);break;case"textbox":case"point":var o="textbox"===e.type?" (content: "+e.content+")":"";(0,u["default"])((0,a["default"])(e.type+" annotation "+t+o,e.uuid),e.x,e.y,e.page);break;case"drawing":case"area":var s="undefined"!=typeof e.x?e.x:e.lines[0][0],d="undefined"!=typeof e.y?e.y:e.lines[0][1];(0,u["default"])((0,a["default"])("Unlabeled drawing",e.uuid),s,d,e.page)}f.includes(e.type)&&(0,h["default"])(e.documentId,e.uuid)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(22),a=i(o),s=n(23),u=i(s),d=n(24),l=i(d),c=n(25),h=i(c),f=["highlight","point","area","drawing","strikeout"];e.exports=t["default"]},function(e,t){"use strict";function n(e,t){var n=document.createElement("div"),i=document.createTextNode(e);return n.appendChild(i),n.setAttribute("id","pdf-annotate-screenreader-"+t),n.style.position="absolute",n.style.left="-10000px",n.style.top="auto",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n,i){if((0,s["default"])(e,t,n,i,!0))return!0;var o=document.querySelector('svg[data-pdf-annotate-page="'+i+'"]'),a=o.getBoundingClientRect(),d=[].concat(r(o.parentNode.querySelectorAll(".textLayer > div")));n=(0,u.scaleUp)(o,{y:n}).y+a.top,t=(0,u.scaleUp)(o,{x:t}).x+a.left;for(var l=0,c=d.length;l<c;l++){var h=d[l],f=h.getBoundingClientRect();if(n<=f.top)return h.parentNode.insertBefore(e,h),!0}var p=o.parentNode.querySelector(".textLayer");if(p){var v=p.getBoundingClientRect();if((0,u.pointIntersectsRect)(t,n,v))return p.appendChild(e),!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(24),s=i(a),u=n(6);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n,i,r){var s=2;t=Math.max(t+s*(r?1:-1),0);var u=o(t,n+s,i);if(!u)return!1;t+=s*(r?-1:1);var d=document.querySelector('svg[data-pdf-annotate-page="'+i+'"]'),l=(0,a.scaleDown)(d,{left:u.getBoundingClientRect().left}).left-d.getBoundingClientRect().left,c=u.cloneNode(!0),h=c.innerHTML.split(""),f=[];for(c.style.position="absolute",c.style.top="-10000px",c.style.left="-10000px",document.body.appendChild(c);h.length;){if(">"===h[h.length-1])for(;h.length&&(f.unshift(h.pop()),"<"!==f[0]););c.innerHTML=h.join("");var p=(0,a.scaleDown)(d,{width:c.getBoundingClientRect().width}).width;if(l+p<=t)break;f.unshift(h.pop())}return u.innerHTML=h.join("")+e.outerHTML+f.join(""),c.parentNode.removeChild(c),!0}function o(e,t,n){var r=document.querySelector('svg[data-pdf-annotate-page="'+n+'"]'),o=r.getBoundingClientRect();return t=(0,a.scaleUp)(r,{y:t}).y+o.top,e=(0,a.scaleUp)(r,{x:e}).x+o.left,[].concat(i(r.parentNode.querySelectorAll(".textLayer [data-canvas-width]"))).filter(function(n){return(0,a.pointIntersectsRect)(e,t,n.getBoundingClientRect())})[0]}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(6);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){var i=void 0;return i=Array.isArray(n)?Promise.resolve(n):a["default"].getStoreAdapter().getComments(e,t),i.then(function(e){var n=document.getElementById("pdf-annotate-screenreader-"+t);if(n){var i=document.createElement("ol");i.setAttribute("id","pdf-annotate-screenreader-comment-list-"+t),i.setAttribute("aria-label","Comments"),n.appendChild(i),e.forEach(u["default"])}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(1),a=i(o),s=n(26),u=i(s);e.exports=t["default"]},function(e,t){"use strict";function n(e){if(e){var t=document.querySelector("#pdf-annotate-screenreader-"+e.annotation+" ol");if(t){var n=document.createElement("li");n.setAttribute("id","pdf-annotate-screenreader-comment-"+e.uuid),n.appendChild(document.createTextNode(""+e.content)),t.appendChild(n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){(0,m.addEventListener)("annotation:add",function(e,t,n){o(e,t,n.type)}),(0,m.addEventListener)("annotation:edit",function(e,t,n){o(e,n.page,n.type)}),(0,m.addEventListener)("annotation:delete",a),(0,m.addEventListener)("comment:add",s),(0,m.addEventListener)("comment:delete",u)}function o(e,t,n){b["default"].getStoreAdapter().getAnnotations(e,t).then(function(e){return e.annotations.filter(function(e){return e.type===n})}).then(function(t){return t.forEach(function(t){a(e,t.uuid)}),t}).then(h["default"])}function a(e,t){d("pdf-annotate-screenreader-"+t),d("pdf-annotate-screenreader-"+t+"-end")}function s(e,t,n){var i=document.querySelector("pdf-annotate-screenreader-comment-list-"+t),r=void 0;r=i?Promise.resolve(!0):(0,g["default"])(e,t,[]).then(function(){return i=document.querySelector("pdf-annotate-screenreader-comment-list-"+t),!0}),r.then(function(){(0,p["default"])(n)})}function u(e,t){d("pdf-annotate-screenreader-comment-"+t)}function d(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var l=n(21),c=(i(l),n(20)),h=i(c),f=n(26),p=i(f),v=n(25),g=i(v),m=n(4),y=n(1),b=i(y);e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(29),o=n(30),a=n(31),s=n(32),u=n(33),d=n(34);t["default"]={addEventListener:i.addEventListener,removeEventListener:i.removeEventListener,fireEvent:i.fireEvent,disableEdit:r.disableEdit,enableEdit:r.enableEdit,setCanEdit:r.setCanEdit,disablePen:o.disablePen,enablePen:o.enablePen,setPen:o.setPen,disablePoint:a.disablePoint,enablePoint:a.enablePoint,disableRect:s.disableRect,enableRect:s.enableRect,disableText:u.disableText,enableText:u.enableText,setText:u.setText,createPage:d.createPage,renderPage:d.renderPage},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){if(e&&e.parentNode){if(C){var t=C.getAttribute("data-target-id"),n=e.getAttribute("data-pdf-annotate-id");if(t===n)return}a(),C=document.createElement("div");var i=document.createElement("a"),r=(0,P.findSVGContainer)(e).parentNode,o=e.getAttribute("data-pdf-annotate-id"),c=(0,P.getAnnotationRect)(e),h=c.left-M,f=c.top-M;C.setAttribute("id","pdf-annotate-edit-overlay"),C.setAttribute("data-target-id",o),C.style.boxSizing="content-box",C.style.position="absolute",C.style.top=f+"px",C.style.left=h+"px",C.style.width=c.width+"px",C.style.height=c.height+"px",C.style.border=M+"px solid "+P.BORDER_COLOR,C.style.borderRadius=M+"px",A&&(i.innerHTML="×",i.setAttribute("href","javascript://"),i.style.background="#fff",i.style.borderRadius="20px",i.style.border="1px solid #bbb",i.style.color="#bbb",i.style.fontSize="16px",i.style.padding="2px",i.style.textAlign="center",i.style.textDecoration="none",i.style.position="absolute",i.style.top="-13px",i.style.right="-13px",i.style.width="25px",i.style.height="25px",C.appendChild(i),document.addEventListener("click",u),document.addEventListener("keyup",d),document.addEventListener("mousedown",l),i.addEventListener("click",s),i.addEventListener("mouseover",function(){i.style.color="#35A4DC",i.style.borderColor="#999",i.style.boxShadow="0 1px 1px #ccc"}),i.addEventListener("mouseout",function(){i.style.color="#bbb",i.style.borderColor="#bbb",i.style.boxShadow=""}),C.addEventListener("mouseover",function(){k||(i.style.display="")}),C.addEventListener("mouseout",function(){i.style.display="none"})),r.appendChild(C)}}function a(){C&&C.parentNode&&C.parentNode.removeChild(C),C=null,document.removeEventListener("click",u),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",l),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),(0,P.enableUserSelect)()}function s(){if(C){var e=C.getAttribute("data-target-id"),t=document.querySelectorAll('[data-pdf-annotate-id="'+e+'"]'),n=C.parentNode.querySelector("svg.annotationLayer"),i=(0,P.getMetadata)(n),o=i.documentId;[].concat(r(t)).forEach(function(e){e.parentNode.removeChild(e)}),b["default"].getStoreAdapter().deleteAnnotation(o,e),a()}}function u(e){if((0,P.findSVGAtPoint)(e.clientX,e.clientY)){var t=document.getElementById("pdf-annotate-edit-overlay");if(t){if(k||e.target===t)return;a()}}}function d(e){C&&46===e.keyCode&&"textarea"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&s()}function l(e){if(e.target===C){var t=C.getAttribute("data-target-id"),n=document.querySelector('[data-pdf-annotate-id="'+t+'"]'),i=n.getAttribute("data-pdf-annotate-type");"highlight"!==i&&"strikeout"!==i&&(k=!0,S=e.clientX,E=e.clientY,I=C.offsetLeft,N=C.offsetTop,C.style.background="rgba(255, 255, 255, 0.7)",C.style.cursor="move",C.querySelector("a").style.display="none",document.addEventListener("mousemove",c),document.addEventListener("mouseup",h),(0,P.disableUserSelect)())}}function c(e){var t=(C.getAttribute("data-target-id"),C.parentNode),n=t.getBoundingClientRect(),i=N+(e.clientY-E),r=I+(e.clientX-S),o=0,a=n.height,s=0,u=n.width;i>o&&i+C.offsetHeight<a&&(C.style.top=i+"px"),r>s&&r+C.offsetWidth<u&&(C.style.left=r+"px")}function h(e){function t(e,t){return n(parseInt(o[0].getAttribute(e),10),parseInt(o[0].getAttribute(t),10))}function n(e,t){return{deltaX:M+(0,P.scaleDown)(s,{x:$(C).position().left}).x-e,deltaY:M+(0,P.scaleDown)(s,{y:$(C).position().top}).y-t}}var i=C.getAttribute("data-target-id"),o=document.querySelectorAll('[data-pdf-annotate-id="'+i+'"]'),a=o[0].getAttribute("data-pdf-annotate-type"),s=C.parentNode.querySelector("svg.annotationLayer"),u=(0,P.getMetadata)(s),d=u.documentId;C.querySelector("a").style.display="",b["default"].getStoreAdapter().getAnnotation(d,i).then(function(e){if(o&&s&&o[0]&&o[0].parentNode)if(["area","highlight","point","textbox","strikeout"].includes(a)){var u=t("x","y"),l=u.deltaX,c=u.deltaY;[].concat(r(o)).forEach(function(t,n){if(0!==c){var r=parseInt(t.getAttribute("y"),10)+c,o=r;"textbox"===a&&(o+=e.size),"point"===a&&(o=(0,P.scaleUp)(s,{viewY:o}).viewY),t.setAttribute("y",o),e.rectangles?e.rectangles[n].y=r:e.y&&(e.y=r)}if(0!==l){var u=parseInt(t.getAttribute("x"),10)+l,h=u;"point"===a&&(h=(0,P.scaleUp)(s,{viewX:h}).viewX),t.setAttribute("x",h),e.rectangles?e.rectangles[n].x=u:e.x&&(e.x=u)}0===l&&0===c||b["default"].getStoreAdapter().editAnnotation(d,i,e)})}else if("drawing"===a){var h=(0,P.scaleDown)(s,(0,P.getAnnotationRect)(o[0])),f=m(e.lines[0],2),p=f[0],v=f[1],g=n(p,v),y=g.deltaX,w=g.deltaY;w+=v-h.top,y+=p-h.left,e.lines.forEach(function(t,n){var i=m(e.lines[n],2),r=i[0],o=i[1];e.lines[n][0]=r+y,e.lines[n][1]=o+w}),o[0].parentNode.removeChild(o[0]),(0,x["default"])(s,e),0===y&&0===w||b["default"].getStoreAdapter().editAnnotation(d,i,e)}}),setTimeout(function(){k=!1},0),C.style.background="",C.style.cursor="",document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),(0,P.enableUserSelect)()}function f(e){o(e)}function p(e){A=e}function v(){L||(L=!0,(0,_.addEventListener)("annotation:click",f))}function g(){a(),L&&(L=!1,(0,_.removeEventListener)("annotation:click",f))}Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.setCanEdit=p,t.enableEdit=v,t.disableEdit=g;var y=n(1),b=i(y),w=n(11),x=i(w),_=n(4),P=n(6),L=!1,A=!0,k=!1,C=void 0,S=void 0,E=void 0,I=void 0,N=void 0,M=3},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){w=null,x=[],document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)}function o(e){var t=void 0;if(x.length>1&&(t=(0,g.findSVGAtPoint)(e.clientX,e.clientY))){var n=(0,g.getMetadata)(t),i=n.documentId,r=n.pageNumber;f["default"].getStoreAdapter().addAnnotation(i,r,{type:"drawing",width:y,color:b,lines:x}).then(function(e){w&&t.removeChild(w),(0,v["default"])(t,e)})}document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o)}function a(e){u(e.clientX,e.clientY)}function s(e){27===e.keyCode&&(x=null,w.parentNode.removeChild(w),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o))}function u(e,t){var n=(0,g.findSVGAtPoint)(e,t);if(n){var i=n.getBoundingClientRect(),r=(0,g.scaleDown)(n,{x:e-i.left,y:t-i.top});x.push([r.x,r.y]),x.length<=1||(w&&n.removeChild(w),w=(0,v["default"])(n,{type:"drawing",color:b,width:y,lines:x}))}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";y=parseInt(e,10),b=t}function l(){m||(m=!0,document.addEventListener("mousedown",r),document.addEventListener("keyup",s),(0,g.disableUserSelect)())}function c(){m&&(m=!1,document.removeEventListener("mousedown",r),document.removeEventListener("keyup",s),(0,g.enableUserSelect)())}Object.defineProperty(t,"__esModule",{value:!0}),t.setPen=d,t.enablePen=l,t.disablePen=c;var h=n(1),f=i(h),p=n(11),v=i(p),g=n(6),m=!1,y=void 0,b=void 0,w=void 0,x=void 0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){!m&&(0,v.findSVGAtPoint)(e.clientX,e.clientY)&&(m=document.createElement("input"),m.setAttribute("id","pdf-annotate-point-input"),m.setAttribute("placeholder","Enter comment"),m.style.border="3px solid "+v.BORDER_COLOR,m.style.borderRadius="3px",m.style.position="absolute",m.style.top=e.clientY+"px",m.style.left=e.clientX+"px",m.addEventListener("blur",o),m.addEventListener("keyup",a),document.body.appendChild(m),m.focus())}function o(){s()}function a(e){27===e.keyCode?u():13===e.keyCode&&s()}function s(){if(m.value.trim().length>0){var e=parseInt(m.style.left,10),t=parseInt(m.style.top,10),n=m.value.trim(),i=(0,v.findSVGAtPoint)(e,t);if(!i)return;var r=i.getBoundingClientRect(),o=(0,v.getMetadata)(i),a=o.documentId,s=o.pageNumber,d=Object.assign({type:"point"},(0,v.scaleDown)(i,{x:e-r.left,y:t-r.top}));h["default"].getStoreAdapter().addAnnotation(a,s,d).then(function(e){h["default"].getStoreAdapter().addComment(a,e.uuid,n),(0,p["default"])(i,e)})}u()}function u(){m.removeEventListener("blur",o),m.removeEventListener("keyup",a),document.body.removeChild(m),m=null}function d(){g||(g=!0,document.addEventListener("mouseup",r))}function l(){g&&(g=!1,document.removeEventListener("mouseup",r))}Object.defineProperty(t,"__esModule",{value:!0}),t.enablePoint=d,t.disablePoint=l;var c=n(1),h=i(c),f=n(11),p=i(f),v=n(6),g=!1,m=void 0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){try{var e=window.getSelection(),t=e.getRangeAt(0),n=t.getClientRects();if(n.length>0&&n[0].width>0&&n[0].height>0)return n}catch(i){}return null}function a(e){var t=void 0;if("area"===b&&(t=(0,m.findSVGAtPoint)(e.clientX,e.clientY))){var n=t.getBoundingClientRect();x=e.clientY,_=e.clientX,w=document.createElement("div"),w.style.position="absolute",w.style.top=x-n.top+"px",w.style.left=_-n.left+"px",w.style.border="3px solid "+m.BORDER_COLOR,w.style.borderRadius="3px",t.parentNode.appendChild(w),document.addEventListener("mousemove",s),(0,m.disableUserSelect)()}}function s(e){var t=w.parentNode.querySelector("svg.annotationLayer"),n=t.getBoundingClientRect();_+(e.clientX-_)<n.right&&(w.style.width=e.clientX-_+"px"),x+(e.clientY-x)<n.bottom&&(w.style.height=e.clientY-x+"px")}function u(e){var t=void 0;if((0,m.findSVGAtPoint)(e.clientX,e.clientY))if("area"!==b&&(t=o())){(0,m.findSVGAtPoint)(t[0].left,t[0].top);l(b,[].concat(r(t)).map(function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}}))}else if("area"===b&&w){var n=w.parentNode.querySelector("svg.annotationLayer"),i=n.getBoundingClientRect();l(b,[{top:parseInt(w.style.top,10)+i.top,left:parseInt(w.style.left,10)+i.left,width:parseInt(w.style.width,10),height:parseInt(w.style.height,10)}]),w.parentNode.removeChild(w),w=null,document.removeEventListener("mousemove",s),(0,m.enableUserSelect)()}}function d(e){if(27===e.keyCode){var t=window.getSelection();t.removeAllRanges(),w&&w.parentNode&&(w.parentNode.removeChild(w),w=null,document.removeEventListener("mousemove",s))}}function l(e,t,n){var i=(0,m.findSVGAtPoint)(t[0].left,t[0].top),o=void 0;if(i){var a=i.getBoundingClientRect();if(n||("highlight"===e?n="FFFF00":"strikeout"===e&&(n="FF0000")),o={type:e,color:n,rectangles:[].concat(r(t)).map(function(t){var n=0;return"strikeout"===e&&(n=t.height/2),(0,m.scaleDown)(i,{y:t.top+n-a.top,x:t.left-a.left,width:t.width,height:t.height})}).filter(function(e){return e.width>0&&e.height>0&&e.x>-1&&e.y>-1})},0!==o.rectangles.length){if("area"===e){var s=o.rectangles[0];delete o.rectangles,o.x=s.x,o.y=s.y,o.width=s.width,o.height=s.height}var u=(0,m.getMetadata)(i),d=u.documentId,l=u.pageNumber;p["default"].getStoreAdapter().addAnnotation(d,l,o).then(function(e){(0,g["default"])(i,e)})}}}function c(e){b=e,y||(y=!0,document.addEventListener("mouseup",u),document.addEventListener("mousedown",a),document.addEventListener("keyup",d))}function h(){y&&(y=!1,document.removeEventListener("mouseup",u),document.removeEventListener("mousedown",a),document.removeEventListener("keyup",d))}Object.defineProperty(t,"__esModule",{value:!0}),t.enableRect=c,t.disableRect=h;var f=n(1),p=i(f),v=n(11),g=i(v),m=n(6),y=!1,b=void 0,w=void 0,x=void 0,_=void 0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){!y&&(0,g.findSVGAtPoint)(e.clientX,e.clientY)&&(y=document.createElement("input"),y.setAttribute("id","pdf-annotate-text-input"),y.setAttribute("placeholder","Enter text"),y.style.border="3px solid "+g.BORDER_COLOR,y.style.borderRadius="3px",y.style.position="absolute",y.style.top=e.clientY+"px",y.style.left=e.clientX+"px",y.style.fontSize=b+"px",y.addEventListener("blur",o),y.addEventListener("keyup",a),document.body.appendChild(y),y.focus())}function o(){s()}function a(e){27===e.keyCode?u():13===e.keyCode&&s()}function s(){if(y.value.trim().length>0){var e=parseInt(y.style.left,10),t=parseInt(y.style.top,10),n=(0,g.findSVGAtPoint)(e,t);if(!n)return;var i=(0,g.getMetadata)(n),r=i.documentId,o=i.pageNumber,a=n.getBoundingClientRect(),s=Object.assign({type:"textbox",size:b,color:w,content:y.value.trim()},(0,g.scaleDown)(n,{x:e-a.left,y:t-a.top,width:y.offsetWidth,height:y.offsetHeight}));f["default"].getStoreAdapter().addAnnotation(r,o,s).then(function(e){(0,v["default"])(n,e)})}u()}function u(){y&&(y.removeEventListener("blur",o),y.removeEventListener("keyup",a),document.body.removeChild(y),y=null)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";b=parseInt(e,10),w=t}function l(){m||(m=!0,document.addEventListener("mouseup",r))}function c(){m&&(m=!1,document.removeEventListener("mouseup",r))}Object.defineProperty(t,"__esModule",{value:!0}),t.setText=d,t.enableText=l,t.disableText=c;var h=n(1),f=i(h),p=n(11),v=i(p),g=n(6),m=!1,y=void 0,b=void 0,w=void 0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=document.createElement("div");t.innerHTML=v;var n=t.children[0],i=n.querySelector("canvas");return n.setAttribute("id","pageContainer"+e),n.setAttribute("data-page-number",e),i.mozOpaque=!0,i.setAttribute("id","page"+e),n}function o(e,t){var n=t.documentId,i=t.pdfDocument,r=t.scale,o=t.rotate;return Promise.all([i.getPage(e),h["default"].getAnnotations(n,e)]).then(function(t){var n=l(t,2),i=n[0],s=n[1],u=document.getElementById("pageContainer"+e),d=u.querySelector(".annotationLayer"),c=u.querySelector(".canvasWrapper canvas"),f=c.getContext("2d",{alpha:!1}),v=i.getViewport(r,o),g=a(e,v,f);return Promise.all([i.render({canvasContext:f,viewport:v,transform:g}),h["default"].render(d,v,s)]).then(function(){return i.getTextContent({normalizeWhitespace:!0}).then(function(t){return new Promise(function(n,i){var r=u.querySelector(".textLayer"),o=new PDFJS.DefaultTextLayerFactory,a=o.createTextLayerBuilder(r,e-1,v);a.setTextContent(t),a.render(),setTimeout(function(){try{(0,p["default"])(s.annotations),n()}catch(e){i(e)}})})})}).then(function(){return u.setAttribute("data-loaded","true"),[i,s]})})}function a(e,t,n){var i=document.getElementById("pageContainer"+e),r=i.querySelector(".canvasWrapper canvas"),o=i.querySelector(".annotationLayer"),a=i.querySelector(".canvasWrapper"),l=i.querySelector(".textLayer"),c=u(n),h=c.scaled?[c.sx,0,0,c.sy,0,0]:null,f=s(c.sx),p=s(c.sy);return i.style.visibility="",r.width=d(t.width*c.sx,f[0]),r.height=d(t.height*c.sy,p[0]),r.style.width=d(t.width,f[1])+"px",r.style.height=d(t.height,f[1])+"px",o.setAttribute("width",t.width),o.setAttribute("height",t.height),o.style.width=t.width+"px",o.style.height=t.height+"px",i.style.width=t.width+"px",i.style.height=t.height+"px",a.style.width=t.width+"px",a.style.height=t.height+"px",l.style.width=t.width+"px",l.style.height=t.height+"px",h}function s(e){if(Math.floor(e)===e)return[e,1];var t=1/e,n=8;if(t>n)return[1,n];if(Math.floor(t)===t)return[1,t];for(var i=e>1?t:e,r=0,o=1,a=1,s=1;;){var u=r+a,d=o+s;if(d>n)break;i<=u/d?(a=u,s=d):(r=u,o=d)}return i-r/o<a/s-i?i===e?[r,o]:[o,r]:i===e?[a,s]:[s,a]}function u(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,i=t/n;return{sx:i,sy:i,scaled:1!==i}}function d(e,t){var n=e%t;return 0===n?e:Math.round(e-n+t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.createPage=r,t.renderPage=o;var c=n(1),h=i(c),f=n(20),p=i(f),v='\n  <div style="visibility: hidden;" class="page" data-loaded="false">\n    <div class="canvasWrapper">\n      <canvas></canvas>\n    </div>\n    <svg class="annotationLayer"></svg>\n    <div class="textLayer"></div>\n  </div>\n'},function(e,t){"use strict";function n(e,t,n){function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h=e,f.setAttribute("data-color",e),f.style.background=e,t&&"function"==typeof n&&n(e),a()}function o(){c?a():s()}function a(){document.removeEventListener("keyup",d),l&&l.parentNode&&l.parentNode.removeChild(l),c=!1,f.focus()}function s(){l||(l=document.createElement("div"),l.style.background="#fff",l.style.border="1px solid #ccc",l.style.padding="2px",l.style.position="absolute",l.style.width="122px",e.style.position="relative",i.map(u).forEach(function(e){e.style.margin="2px",e.onclick=function(){r(e.getAttribute("data-color"))},l.appendChild(e)})),document.addEventListener("keyup",d),e.appendChild(l),c=!0}function u(e){var t=document.createElement("a");return t.className="color",t.setAttribute("href","javascript://"),t.setAttribute("title",e.name),t.setAttribute("data-color",e.hex),t.style.background=e.hex,t}function d(e){27===e.keyCode&&a()}var l=void 0,c=!1,h=void 0,f=u({hex:t});f.onclick=o,e.appendChild(f),r(t,!1)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var i=[{hex:"#000000",name:"Black"},{hex:"#EF4437",name:"Red"},{hex:"#E71F63",name:"Pink"},{hex:"#8F3E97",name:"Purple"},{hex:"#65499D",name:"Deep Purple"},{hex:"#4554A4",name:"Indigo"},{hex:"#2083C5",name:"Blue"},{hex:"#35A4DC",name:"Light Blue"},{hex:"#09BCD3",name:"Cyan"},{hex:"#009688",name:"Teal"},{hex:"#43A047",name:"Green"},{hex:"#8BC34A",name:"Light Green"},{hex:"#FDC010",name:"Yellow"},{hex:"#F8971C",name:"Orange"},{hex:"#F0592B",name:"Deep Orange"},{hex:"#F06291",name:"Light Pink"}];e.exports=t["default"]},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:void 0).PDFJS={}),function(){function e(e){var t=e.indexOf("#"),n=e.indexOf("?"),i=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",i)+1,i)}function t(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,i=t/n;return{sx:i,sy:i,scaled:1!==i}}function i(e,t,n){var i=e.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");for(var r=n||!1,o=e.offsetTop+e.clientTop,a=e.offsetLeft+e.clientLeft;i.clientHeight===i.scrollHeight||r&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(o/=i.dataset._scaleY,a/=i.dataset._scaleX),o+=i.offsetTop,a+=i.offsetLeft,i=i.offsetParent,!i)return;t&&(void 0!==t.top&&(o+=t.top),void 0!==t.left&&(a+=t.left,i.scrollLeft=a)),i.scrollTop=o}function r(e,t){var n=function(n){r||(r=window.requestAnimationFrame(function(){r=null;var n=e.scrollTop,o=i.lastY;n!==o&&(i.down=n>o),
i.lastY=n,t(i)}))},i={down:!0,lastY:e.scrollTop,_eventHandler:n},r=null;return e.addEventListener("scroll",n,!0),i}function o(e){for(var t=e.split("&"),n={},i=0,r=t.length;i<r;++i){var o=t[i].split("="),a=o[0].toLowerCase(),s=o.length>1?o[1]:null;n[decodeURIComponent(a)]=decodeURIComponent(s)}return n}function a(e,t){var n=0,i=e.length-1;if(0===e.length||!t(e[i]))return e.length;if(t(e[n]))return n;for(;n<i;){var r=n+i>>1,o=e[r];t(o)?i=r:n=r+1}return n}function s(e){if(Math.floor(e)===e)return[e,1];var t=1/e,n=8;if(t>n)return[1,n];if(Math.floor(t)===t)return[1,t];for(var i=e>1?t:e,r=0,o=1,a=1,s=1;;){var u=r+a,d=o+s;if(d>n)break;i<=u/d?(a=u,s=d):(r=u,o=d)}return i-r/o<a/s-i?i===e?[r,o]:[o,r]:i===e?[a,s]:[s,a]}function u(e,t){var n=e%t;return 0===n?e:Math.round(e-n+t)}function d(e,t,n){function i(e){var t=e.div,n=t.offsetTop+t.clientTop+t.clientHeight;return n>f}for(var r,o,s,u,d,l,c,h,f=e.scrollTop,p=f+e.clientHeight,v=e.scrollLeft,g=v+e.clientWidth,m=[],y=0===t.length?0:a(t,i),b=y,w=t.length;b<w&&(r=t[b],o=r.div,s=o.offsetTop+o.clientTop,u=o.clientHeight,!(s>p));b++)c=o.offsetLeft+o.clientLeft,h=o.clientWidth,c+h<v||c>g||(d=Math.max(0,f-s)+Math.max(0,s+u-p),l=100*(u-d)/u|0,m.push({id:r.id,x:c,y:s,view:r,percent:l}));var x=m[0],_=m[m.length-1];return n&&m.sort(function(e,t){var n=e.percent-t.percent;return Math.abs(n)>.001?-n:e.id-t.id}),{first:x,last:_,views:m}}function l(){}function c(){}var h=96/72,f="auto",p=1,v=0,g=1.25,m=40,y=5,b=function(){function e(e,t,n){return Math.min(Math.max(e,t),n)}function t(e,t){this.visible=!0,this.div=document.querySelector(e+" .progress"),this.bar=this.div.parentNode,this.height=t.height||100,this.width=t.width||100,this.units=t.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return t.prototype={updateBar:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var e=this.width*this._percent/100;this.div.style.width=e+this.units},get percent(){return this._percent},set percent(t){this._indeterminate=isNaN(t),this._percent=e(t,0,100),this.updateBar()},setWidth:function(e){if(e){var t=e.parentNode,n=t.offsetWidth-e.offsetWidth;n>0&&this.bar.setAttribute("style","width: calc(100% - "+n+"px);")}},hide:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))},show:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},t}(),w=function(){function e(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return e.prototype={setDocument:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)},setViewer:function(e){this.pdfViewer=e},setHistory:function(e){this.pdfHistory=e},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},navigateTo:function(e){var t,n="",i=this,r=function o(t){var r=t instanceof Object?i._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;r?(r>i.pagesCount&&(r=i.pagesCount),i.pdfViewer.scrollPageIntoView(r,e),i.pdfHistory&&i.pdfHistory.push({dest:e,hash:n,page:r})):i.pdfDocument.getPageIndex(t).then(function(e){var n=e+1,r=t.num+" "+t.gen+" R";i._pagesRefCache[r]=n,o(t)})};"string"==typeof e?(n=e,t=this.pdfDocument.getDestination(e)):t=Promise.resolve(e),t.then(function(t){e=t,t instanceof Array&&r(t[0])})},getDestinationHash:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t=e[0],i=t instanceof Object?this._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;if(i){var r=this.getAnchorUrl("#page="+i),o=e[1];if("object"===("undefined"==typeof o?"undefined":n(o))&&"name"in o&&"XYZ"===o.name){var a=e[4]||this.pdfViewer.currentScaleValue,s=parseFloat(a);s&&(a=100*s),r+="&zoom="+a,(e[2]||e[3])&&(r+=","+(e[2]||0)+","+(e[3]||0))}return r}}return this.getAnchorUrl("")},getAnchorUrl:function(e){return(this.baseUrl||"")+e},setHash:function(e){if(e.indexOf("=")>=0){var t=o(e);if("nameddest"in t)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(t.nameddest),void this.navigateTo(t.nameddest);var n,i;if("page"in t&&(n=0|t.page||1),"zoom"in t){var r=t.zoom.split(","),a=r[0],s=parseFloat(a);a.indexOf("Fit")===-1?i=[null,{name:"XYZ"},r.length>1?0|r[1]:null,r.length>2?0|r[2]:null,s?s/100:a]:"Fit"===a||"FitB"===a?i=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?i=[null,{name:a},r.length>1?0|r[1]:null]:"FitR"===a?5!==r.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):i=[null,{name:a},0|r[1],0|r[2],0|r[3],0|r[4]]:console.error("PDFLinkService_setHash: '"+a+"' is not a valid zoom value.")}if(i?this.pdfViewer.scrollPageIntoView(n||this.page,i):n&&(this.page=n),"pagemode"in t){var u=document.createEvent("CustomEvent");u.initCustomEvent("pagemode",!0,!0,{mode:t.pagemode}),this.pdfViewer.container.dispatchEvent(u)}}else/^\d+$/.test(e)?this.page=e:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(e)),this.navigateTo(unescape(e)))},executeNamedAction:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfViewer.container.dispatchEvent(t)},cachePageRef:function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e}},e}(),x={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},_=!1,P=10,L=3e4,A={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},k=function(){function e(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return e.prototype={setViewer:function(e){this.pdfViewer=e},setThumbnailViewer:function(e){this.pdfThumbnailViewer=e},isHighestPriority:function(e){return this.highestPriorityPage===e.renderingId},renderHighestPriority:function(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),L))},getHighestPriority:function(e,t,n){var i=e.views,r=i.length;if(0===r)return!1;for(var o=0;o<r;++o){var a=i[o].view;if(!this.isViewFinished(a))return a}if(n){var s=e.last.id;if(t[s]&&!this.isViewFinished(t[s]))return t[s]}else{var u=e.first.id-2;if(t[u]&&!this.isViewFinished(t[u]))return t[u]}return null},isViewFinished:function(e){return e.renderingState===A.FINISHED},renderView:function(e){var t=e.renderingState;switch(t){case A.FINISHED:return!1;case A.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case A.RUNNING:this.highestPriorityPage=e.renderingId;break;case A.INITIAL:this.highestPriorityPage=e.renderingId;var n=function(){this.renderHighestPriority()}.bind(this);e.draw().then(n,n)}return!0}},e}(),C=200,S=function(){function e(e){var t=e.container,n=e.id,i=e.scale,r=e.defaultViewport,o=e.renderingQueue,a=e.textLayerFactory,s=e.annotationLayerFactory;this.id=n,this.renderingId="page"+n,this.rotation=0,this.scale=i||p,this.viewport=r,this.pdfPageRotate=r.rotation,this.hasRestrictedScaling=!1,this.renderingQueue=o,this.textLayerFactory=a,this.annotationLayerFactory=s,this.renderingState=A.INITIAL,this.resume=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.textLayer=null,this.zoomLayer=null,this.annotationLayer=null;var u=document.createElement("div");u.id="pageContainer"+this.id,u.className="page",u.style.width=Math.floor(this.viewport.width)+"px",u.style.height=Math.floor(this.viewport.height)+"px",u.setAttribute("data-page-number",this.id),this.div=u,t.appendChild(u)}return e.prototype={setPdfPage:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport(this.scale*h,t),this.stats=e.stats,this.reset()},destroy:function(){this.zoomLayer=null,this.reset(),this.pdfPage&&this.pdfPage.cleanup()},reset:function(e,t){this.renderTask&&this.renderTask.cancel(),this.resume=null,this.renderingState=A.INITIAL;var n=this.div;n.style.width=Math.floor(this.viewport.width)+"px",n.style.height=Math.floor(this.viewport.height)+"px";for(var i=n.childNodes,r=e&&this.zoomLayer||null,o=t&&this.annotationLayer&&this.annotationLayer.div||null,a=i.length-1;a>=0;a--){var s=i[a];r!==s&&o!==s&&n.removeChild(s)}n.removeAttribute("data-loaded"),o?this.annotationLayer.hide():this.annotationLayer=null,this.canvas&&!r&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",n.appendChild(this.loadingIconDiv)},update:function(e,t){this.scale=e||this.scale,"undefined"!=typeof t&&(this.rotation=t);var n=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*h,rotation:n});var i=!1;if(this.canvas&&PDFJS.maxCanvasPixels>0){var r=this.outputScale,o=this.viewport.width*this.viewport.height;Math.sqrt(PDFJS.maxCanvasPixels/o);(Math.floor(this.viewport.width)*r.sx|0)*(Math.floor(this.viewport.height)*r.sy|0)>PDFJS.maxCanvasPixels&&(i=!0)}if(this.canvas){if(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&i){this.cssTransform(this.canvas,!0);var a=document.createEvent("CustomEvent");return a.initCustomEvent("pagerendered",!0,!0,{pageNumber:this.id,cssTransform:!0}),void this.div.dispatchEvent(a)}this.zoomLayer||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)},updatePosition:function(){this.textLayer&&this.textLayer.render(C)},cssTransform:function(e,t){var n=PDFJS.CustomStyle,i=this.viewport.width,r=this.viewport.height,o=this.div;e.style.width=e.parentNode.style.width=o.style.width=Math.floor(i)+"px",e.style.height=e.parentNode.style.height=o.style.height=Math.floor(r)+"px";var a=this.viewport.rotation-e._viewport.rotation,s=Math.abs(a),u=1,d=1;90!==s&&270!==s||(u=r/i,d=i/r);var l="rotate("+a+"deg) scale("+u+","+d+")";if(n.setProp("transform",e,l),this.textLayer){var c=this.textLayer.viewport,h=this.viewport.rotation-c.rotation,f=Math.abs(h),p=i/c.width;90!==f&&270!==f||(p=i/c.height);var v,g,m=this.textLayer.textLayerDiv;switch(f){case 0:v=g=0;break;case 90:v=0,g="-"+m.style.height;break;case 180:v="-"+m.style.width,g="-"+m.style.height;break;case 270:v="-"+m.style.width,g=0;break;default:console.error("Bad rotation value.")}n.setProp("transform",m,"rotate("+f+"deg) scale("+p+", "+p+") translate("+v+", "+g+")"),n.setProp("transformOrigin",m,"0% 0%")}t&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")},get width(){return this.viewport.width},get height(){return this.viewport.height},getPagePoint:function(e,t){return this.viewport.convertToPdfPoint(e,t)},draw:function(){function e(e){if(E===P.renderTask&&(P.renderTask=null),"cancelled"===e)return void x(e);if(P.renderingState=A.FINISHED,d&&(P.canvas.removeAttribute("hidden"),d=!1),P.loadingIconDiv&&(r.removeChild(P.loadingIconDiv),delete P.loadingIconDiv),P.zoomLayer){var t=P.zoomLayer.firstChild;t.width=0,t.height=0,r.removeChild(P.zoomLayer),P.zoomLayer=null}P.error=e,P.stats=n.stats,P.onAfterDraw&&P.onAfterDraw();var i=document.createEvent("CustomEvent");i.initCustomEvent("pagerendered",!0,!0,{pageNumber:P.id,cssTransform:!1}),r.dispatchEvent(i),e?x(e):w(void 0)}this.renderingState!==A.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=A.RUNNING;var n=this.pdfPage,i=this.viewport,r=this.div,o=document.createElement("div");o.style.width=r.style.width,o.style.height=r.style.height,o.classList.add("canvasWrapper");var a=document.createElement("canvas");a.id="page"+this.id,a.setAttribute("hidden","hidden");var d=!0;o.appendChild(a),this.annotationLayer&&this.annotationLayer.div?r.insertBefore(o,this.annotationLayer.div):r.appendChild(o),this.canvas=a;var l=a.getContext("2d",{alpha:!1}),c=t(l);if(this.outputScale=c,PDFJS.useOnlyCssZoom){var f=i.clone({scale:h});c.sx*=f.width/i.width,c.sy*=f.height/i.height,c.scaled=!0}if(PDFJS.maxCanvasPixels>0){var p=i.width*i.height,v=Math.sqrt(PDFJS.maxCanvasPixels/p);c.sx>v||c.sy>v?(c.sx=v,c.sy=v,c.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var g=s(c.sx),m=s(c.sy);a.width=u(i.width*c.sx,g[0]),a.height=u(i.height*c.sy,m[0]),a.style.width=u(i.width,g[1])+"px",a.style.height=u(i.height,m[1])+"px",a._viewport=i;var y=null,b=null;this.textLayerFactory&&(y=document.createElement("div"),y.className="textLayer",y.style.width=o.style.width,y.style.height=o.style.height,this.annotationLayer&&this.annotationLayer.div?r.insertBefore(y,this.annotationLayer.div):r.appendChild(y),b=this.textLayerFactory.createTextLayerBuilder(y,this.id-1,this.viewport)),this.textLayer=b;var w,x,_=new Promise(function(e,t){w=e,x=t}),P=this,L=null;this.renderingQueue&&(L=function(e){return P.renderingQueue.isHighestPriority(P)?(d&&(P.canvas.removeAttribute("hidden"),d=!1),void e()):(P.renderingState=A.PAUSED,void(P.resume=function(){P.renderingState=A.RUNNING,e()}))});var k=c.scaled?[c.sx,0,0,c.sy,0,0]:null,S={canvasContext:l,transform:k,viewport:this.viewport},E=this.renderTask=this.pdfPage.render(S);return E.onContinue=L,this.renderTask.promise.then(function(){e(null),b&&P.pdfPage.getTextContent({normalizeWhitespace:!0}).then(function(e){b.setTextContent(e),b.render(C)})},function(t){e(t)}),this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(r,this.pdfPage)),this.annotationLayer.render(this.viewport,"display")),r.setAttribute("data-loaded",!0),P.onBeforeDraw&&P.onBeforeDraw(),_},beforePrint:function(){var e=PDFJS.CustomStyle,t=this.pdfPage,n=t.getViewport(1),i=2,r=document.createElement("canvas");r.width=Math.floor(n.width)*i,r.height=Math.floor(n.height)*i,r.style.width=100*i+"%",r.style.height=100*i+"%";var o="scale("+1/i+", "+1/i+")";e.setProp("transform",r,o),e.setProp("transformOrigin",r,"0% 0%");var a=document.getElementById("printContainer"),s=document.createElement("div");s.style.width=n.width+"pt",s.style.height=n.height+"pt",s.appendChild(r),a.appendChild(s),r.mozPrintCallback=function(e){var o=e.context;o.save(),o.fillStyle="rgb(255, 255, 255)",o.fillRect(0,0,r.width,r.height),o.restore(),o._transformMatrix=[i,0,0,i,0,0],o.scale(i,i);var a={canvasContext:o,viewport:n,intent:"print"};t.render(a).promise.then(function(){e.done()},function(t){console.error(t),"abort"in e?e.abort():e.done()})}}},e}(),E=function(){function e(e){this.textLayerDiv=e.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=e.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=e.viewport,this.textDivs=[],this.findController=e.findController||null,this.textLayerRenderTask=null,this._bindMouse()}return e.prototype={_finishRendering:function(){this.renderingDone=!0;var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e);var t=document.createEvent("CustomEvent");t.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:this.pageNumber}),this.textLayerDiv.dispatchEvent(t)},render:function(e){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var t=document.createDocumentFragment();this.textLayerRenderTask=PDFJS.renderTextLayer({textContent:this.textContent,container:t,viewport:this.viewport,textDivs:this.textDivs,timeout:e}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(t),this._finishRendering(),this.updateMatches()}.bind(this),function(e){})}},setTextContent:function(e){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0},convertMatches:function(e){for(var t=0,n=0,i=this.textContent.items,r=i.length-1,o=null===this.findController?0:this.findController.state.query.length,a=[],s=0,u=e.length;s<u;s++){for(var d=e[s];t!==r&&d>=n+i[t].str.length;)n+=i[t].str.length,t++;t===i.length&&console.error("Could not find a matching mapping");var l={begin:{divIdx:t,offset:d-n}};for(d+=o;t!==r&&d>n+i[t].str.length;)n+=i[t].str.length,t++;l.end={divIdx:t,offset:d-n},a.push(l)}return a},renderMatches:function(e){function t(e,t){var i=e.divIdx;r[i].textContent="",n(i,0,e.offset,t)}function n(e,t,n,o){var a=r[e],s=i[e].str.substring(t,n),u=document.createTextNode(s);if(o){var d=document.createElement("span");return d.className=o,d.appendChild(u),void a.appendChild(d)}a.appendChild(u)}if(0!==e.length){var i=this.textContent.items,r=this.textDivs,o=null,a=this.pageIdx,s=null!==this.findController&&a===this.findController.selected.pageIdx,u=null===this.findController?-1:this.findController.selected.matchIdx,d=null!==this.findController&&this.findController.state.highlightAll,l={divIdx:-1,offset:void 0},c=u,h=c+1;if(d)c=0,h=e.length;else if(!s)return;for(var f=c;f<h;f++){var p=e[f],v=p.begin,g=p.end,m=s&&f===u,y=m?" selected":"";if(this.findController&&this.findController.updateMatchPosition(a,f,r,v.divIdx,g.divIdx),o&&v.divIdx===o.divIdx?n(o.divIdx,o.offset,v.offset):(null!==o&&n(o.divIdx,o.offset,l.offset),t(v)),v.divIdx===g.divIdx)n(v.divIdx,v.offset,g.offset,"highlight"+y);else{n(v.divIdx,v.offset,l.offset,"highlight begin"+y);for(var b=v.divIdx+1,w=g.divIdx;b<w;b++)r[b].className="highlight middle"+y;t(g,"highlight end"+y)}o=g}o&&n(o.divIdx,o.offset,l.offset)}},updateMatches:function(){if(this.renderingDone){for(var e=this.matches,t=this.textDivs,n=this.textContent.items,i=-1,r=0,o=e.length;r<o;r++){for(var a=e[r],s=Math.max(i,a.begin.divIdx),u=s,d=a.end.divIdx;u<=d;u++){var l=t[u];l.textContent=n[u].str,l.className=""}i=a.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}},_bindMouse:function(){var e=this.textLayerDiv;e.addEventListener("mousedown",function(t){var n=e.querySelector(".endOfContent");if(n){var i=t.target!==e;if(i){var r=e.getBoundingClientRect(),o=Math.max(0,(t.pageY-r.top)/r.height);n.style.top=(100*o).toFixed(2)+"%"}n.classList.add("active")}}),e.addEventListener("mouseup",function(t){var n=e.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))})}},e}();l.prototype={createTextLayerBuilder:function(e,t,n){return new E({textLayerDiv:e,pageIndex:t,viewport:n})}};var I=function(){function e(e){this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.linkService=e.linkService,this.div=null}return e.prototype={render:function(e,t){var n=this,i={intent:void 0===t?"display":t};this.pdfPage.getAnnotations(i).then(function(t){if(e=e.clone({dontFlip:!0}),i={viewport:e,div:n.div,annotations:t,page:n.pdfPage,linkService:n.linkService},n.div)PDFJS.AnnotationLayer.update(i);else{if(0===t.length)return;n.div=document.createElement("div"),n.div.className="annotationLayer",n.pageDiv.appendChild(n.div),i.div=n.div,PDFJS.AnnotationLayer.render(i),"undefined"!=typeof mozL10n&&mozL10n.translate(n.div)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},e}();c.prototype={createAnnotationLayerBuilder:function(e,t){return new I({pageDiv:e,pdfPage:t,linkService:new M})}};var N=function(){function e(e){var t=[];this.push=function(n){var i=t.indexOf(n);i>=0&&t.splice(i,1),t.push(n),t.length>e&&t.shift().destroy()},this.resize=function(n){for(e=n;t.length>e;)t.shift().destroy()}}function t(e,t){return t===e||Math.abs(t-e)<1e-15}function n(e){this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.linkService=e.linkService||new M,this.removePageBorders=e.removePageBorders||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new k,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=r(this.container,this._scrollUpdate.bind(this)),this.updateInProgress=!1,this.presentationModeState=x.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return n.prototype={get pagesCount(){return this._pages.length},getPageView:function(e){return this._pages[e]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(e){if(!this.pdfDocument)return void(this._currentPageNumber=e);var t=document.createEvent("UIEvents");return t.initUIEvent("pagechange",!0,!0,window,0),t.updateInProgress=this.updateInProgress,0<e&&e<=this.pagesCount?(t.previousPageNumber=this._currentPageNumber,this._currentPageNumber=e,t.pageNumber=e,this.container.dispatchEvent(t),void(this.updateInProgress||this.scrollPageIntoView(e))):(t.pageNumber=this._currentPageNumber,t.previousPageNumber=e,void this.container.dispatchEvent(t))},get currentScale(){return this._currentScale!==v?this._currentScale:p},set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale");return this.pdfDocument?void this._setScale(e,!1):(this._currentScale=e,void(this._currentScaleValue=e!==v?e.toString():null))},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(e){return this.pdfDocument?void this._setScale(e,!1):(this._currentScale=isNaN(e)?v:e,void(this._currentScaleValue=e))},get pagesRotation(){return this._pagesRotation},set pagesRotation(e){this._pagesRotation=e;for(var t=0,n=this._pages.length;t<n;t++){var i=this._pages[t];i.update(i.scale,e)}this._setScale(this._currentScaleValue,!0),this.defaultRenderingQueue&&this.update()},setDocument:function(e){if(this.pdfDocument&&this._resetView(),this.pdfDocument=e,e){var t,n=e.numPages,i=this,r=new Promise(function(e){t=e});this.pagesPromise=r,r.then(function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesloaded",!0,!0,{pagesCount:n}),i.container.dispatchEvent(e)});var o=!1,a=null,s=new Promise(function(e){a=e});this.onePageRendered=s;var u=function(e){e.onBeforeDraw=function(){i._buffer.push(this)},e.onAfterDraw=function(){o||(o=!0,a())}},d=e.getPage(1);return this.firstPagePromise=d,d.then(function(r){for(var o=this.currentScale,a=r.getViewport(o*h),d=1;d<=n;++d){var l=null;PDFJS.disableTextLayer||(l=this);var c=new S({container:this.viewer,id:d,scale:o,defaultViewport:a.clone(),renderingQueue:this.renderingQueue,textLayerFactory:l,annotationLayerFactory:this});u(c),this._pages.push(c)}var f=this.linkService;s.then(function(){if(PDFJS.disableAutoFetch)t();else for(var r=n,o=1;o<=n;++o)e.getPage(o).then(function(e,n){var o=i._pages[e-1];o.pdfPage||o.setPdfPage(n),f.cachePageRef(e,n.ref),r--,r||t()}.bind(null,o))});var p=document.createEvent("CustomEvent");p.initCustomEvent("pagesinit",!0,!0,null),i.container.dispatchEvent(p),this.defaultRenderingQueue&&this.update(),this.findController&&this.findController.resolveFirstPage()}.bind(this))}},_resetView:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=v,this._currentScaleValue=null,this._buffer=new e(P),this._location=null,this._pagesRotation=0,this._pagesRequests=[];for(var t=this.viewer;t.hasChildNodes();)t.removeChild(t.lastChild)},_scrollUpdate:function(){if(0!==this.pagesCount){this.update();for(var e=0,t=this._pages.length;e<t;e++)this._pages[e].updatePosition()}},_setScaleDispatchEvent:function(e,t,n){var i=document.createEvent("UIEvents");i.initUIEvent("scalechange",!0,!0,window,0),i.scale=e,n&&(i.presetValue=t),this.container.dispatchEvent(i)},_setScaleUpdatePages:function(e,n,i,r){if(this._currentScaleValue=n,t(this._currentScale,e))return void(r&&this._setScaleDispatchEvent(e,n,!0));for(var o=0,a=this._pages.length;o<a;o++)this._pages[o].update(e);if(this._currentScale=e,!i){var s,u=this._currentPageNumber;!this._location||_||this.isInPresentationMode||this.isChangingPresentationMode||(u=this._location.pageNumber,s=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView(u,s)}this._setScaleDispatchEvent(e,n,r),this.defaultRenderingQueue&&this.update()},_setScale:function(e,t){var n=parseFloat(e);if(n>0)this._setScaleUpdatePages(n,e,t,!1);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var r=this.isInPresentationMode||this.removePageBorders?0:m,o=this.isInPresentationMode||this.removePageBorders?0:y,a=(this.container.clientWidth-r)/i.width*i.scale,s=(this.container.clientHeight-o)/i.height*i.scale;switch(e){case"page-actual":n=1;break;case"page-width":n=a;break;case"page-height":n=s;break;case"page-fit":n=Math.min(a,s);break;case"auto":var u=i.width>i.height,d=u?Math.min(s,a):a;n=Math.min(g,d);break;default:return void console.error("pdfViewSetScale: '"+e+"' is an unknown zoom value.")}this._setScaleUpdatePages(n,e,t,!0)}},scrollPageIntoView:function(e,t){if(this.pdfDocument){var n=this._pages[e-1];if(this.isInPresentationMode){if(this._currentPageNumber!==n.id)return void(this.currentPageNumber=n.id);t=null,this._setScale(this._currentScaleValue,!0)}if(!t)return void i(n.div);var r,o,a=0,s=0,u=0,d=0,l=n.rotation%180!==0,c=(l?n.height:n.width)/n.scale/h,p=(l?n.width:n.height)/n.scale/h,g=0;switch(t[1].name){case"XYZ":a=t[2],s=t[3],g=t[4],a=null!==a?a:0,s=null!==s?s:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":s=t[2],g="page-width",null===s&&this._location&&(a=this._location.left,s=this._location.top);break;case"FitV":case"FitBV":a=t[2],u=c,d=p,g="page-height";break;case"FitR":a=t[2],s=t[3],u=t[4]-a,d=t[5]-s;var b=this.removePageBorders?0:m,w=this.removePageBorders?0:y;r=(this.container.clientWidth-b)/u/h,o=(this.container.clientHeight-w)/d/h,g=Math.min(Math.abs(r),Math.abs(o));break;default:return}if(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===v&&(this.currentScaleValue=f),"page-fit"===g&&!t[4])return void i(n.div);var x=[n.viewport.convertToViewportPoint(a,s),n.viewport.convertToViewportPoint(a+u,s+d)],_=Math.min(x[0][0],x[1][0]),P=Math.min(x[0][1],x[1][1]);i(n.div,{left:_,top:P})}},_updateLocation:function(e){var t=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===t?Math.round(1e4*t)/100:n,r=e.id,o="#page="+r;o+="&zoom="+i;var a=this._pages[r-1],s=this.container,u=a.getPagePoint(s.scrollLeft-e.x,s.scrollTop-e.y),d=Math.round(u[0]),l=Math.round(u[1]);o+=","+d+","+l,this._location={pageNumber:r,scale:i,top:l,left:d,pdfOpenParams:o}},update:function(){var e=this._getVisiblePages(),t=e.views;if(0!==t.length){this.updateInProgress=!0;var n=Math.max(P,2*t.length+1);this._buffer.resize(n),this.renderingQueue.renderHighestPriority(e);for(var i=this._currentPageNumber,r=e.first,o=0,a=t.length,s=!1;o<a;++o){var u=t[o];if(u.percent<100)break;if(u.id===i){s=!0;break}}s||(i=t[0].id),this.isInPresentationMode||(this.currentPageNumber=i),this._updateLocation(r),this.updateInProgress=!1;var d=document.createEvent("UIEvents");d.initUIEvent("updateviewarea",!0,!0,window,0),d.location=this._location,this.container.dispatchEvent(d)}},containsElement:function(e){return this.container.contains(e)},focus:function(){this.container.focus()},get isInPresentationMode(){return this.presentationModeState===x.FULLSCREEN},get isChangingPresentationMode(){return this.presentationModeState===x.CHANGING},get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){if(this.isInPresentationMode){var e=[],t=this._pages[this._currentPageNumber-1];return e.push({id:t.id,view:t}),{first:t,last:t,views:e}}return d(this.container,this._pages,!0)},cleanup:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].renderingState!==A.FINISHED&&this._pages[e].reset()},_ensurePdfPageLoaded:function(e){if(e.pdfPage)return Promise.resolve(e.pdfPage);var t=e.id;if(this._pagesRequests[t])return this._pagesRequests[t];var n=this.pdfDocument.getPage(t).then(function(n){return e.setPdfPage(n),this._pagesRequests[t]=null,n}.bind(this));return this._pagesRequests[t]=n,n},forceRendering:function(e){var t=e||this._getVisiblePages(),n=this.renderingQueue.getHighestPriority(t,this._pages,this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(function(){this.renderingQueue.renderView(n)}.bind(this)),!0)},getPageTextContent:function(e){return this.pdfDocument.getPage(e+1).then(function(e){return e.getTextContent({normalizeWhitespace:!0})})},createTextLayerBuilder:function(e,t,n){return new E({textLayerDiv:e,pageIndex:t,viewport:n,findController:this.isInPresentationMode?null:this.findController})},createAnnotationLayerBuilder:function(e,t){return new I({pageDiv:e,pdfPage:t,linkService:this.linkService})},setFindController:function(e){this.findController=e}},n}(),M=function(){function e(){}return e.prototype={get page(){return 0},set page(e){},navigateTo:function(e){},getDestinationHash:function(e){return"#"},getAnchorUrl:function(e){return"#"},setHash:function(e){},executeNamedAction:function(e){},cachePageRef:function(e,t){}},e}(),O=function(){function e(e){this.linkService=e.linkService,this.initialized=!1,this.initialDestination=null,this.initialBookmark=null}return e.prototype={initialize:function(e){function t(){o.previousHash=window.location.hash.slice(1),o._pushToHistory({hash:o.previousHash},!1,!0),o._updatePreviousBookmark()}function n(e,t){function n(){window.removeEventListener("popstate",n),window.addEventListener("popstate",i),o._pushToHistory(e,!1,!0),history.forward()}function i(){window.removeEventListener("popstate",i),o.allowHashChange=!0,o.historyUnlocked=!0,t()}o.historyUnlocked=!1,o.allowHashChange=!1,window.addEventListener("popstate",n),history.back()}function i(){var e=o._getPreviousParams(null,!0);if(e){var t=!o.current.dest&&o.current.hash!==o.previousHash;o._pushToHistory(e,!1,t),o._updatePreviousBookmark()}window.removeEventListener("beforeunload",i,!1)}this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.isViewerInPresentationMode=!1,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=e,this.currentUid=this.uid=0,this.current={};var r=window.history.state;this._isStateObjectDefined(r)?(r.target.dest?this.initialDestination=r.target.dest:this.initialBookmark=r.target.hash,this.currentUid=r.uid,this.uid=r.uid+1,this.current=r.target):(r&&r.fingerprint&&this.fingerprint!==r.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var o=this;window.addEventListener("popstate",function(e){if(o.historyUnlocked){if(e.state)return void o._goTo(e.state);if(0===o.uid){var i=o.previousHash&&o.currentBookmark&&o.previousHash!==o.currentBookmark?{hash:o.currentBookmark,page:o.currentPage}:{page:1};n(i,function(){t()})}else t()}},!1),window.addEventListener("beforeunload",i,!1),window.addEventListener("pageshow",function(e){window.addEventListener("beforeunload",i,!1)},!1),window.addEventListener("presentationmodechanged",function(e){o.isViewerInPresentationMode=!!e.detail.active})},clearHistoryState:function(){this._pushOrReplaceState(null,!0)},_isStateObjectDefined:function(e){return!!(e&&e.uid>=0&&e.fingerprint&&this.fingerprint===e.fingerprint&&e.target&&e.target.hash)},_pushOrReplaceState:function(e,t){t?window.history.replaceState(e,""):window.history.pushState(e,"")},get isHashChangeUnlocked(){return!this.initialized||this.allowHashChange},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,
this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(e,t){this.initialized&&(this.currentBookmark=e.substring(1),this.currentPage=0|t,this._updatePreviousBookmark())},updateNextHashParam:function(e){this.initialized&&(this.nextHashParam=e)},push:function(e,t){if(this.initialized&&this.historyUnlocked){if(e.dest&&!e.hash&&(e.hash=this.current.hash&&this.current.dest&&this.current.dest===e.dest?this.current.hash:this.linkService.getDestinationHash(e.dest).split("#")[1]),e.page&&(e.page|=0),t){var n=window.history.state.target;return n||(this._pushToHistory(e,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=!this.nextHashParam,void(n&&this._updatePreviousBookmark())}if(this.nextHashParam){if(this.nextHashParam===e.hash)return this.nextHashParam=null,void(this.updatePreviousBookmark=!0);this.nextHashParam=null}e.hash?this.current.hash?this.current.hash!==e.hash?this._pushToHistory(e,!0):(!this.current.page&&e.page&&this._pushToHistory(e,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(e,!0):this.current.page&&e.page&&this.current.page!==e.page&&this._pushToHistory(e,!0)}},_getPreviousParams:function(e,t){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!e||t){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!e)return null;if(this.previousPage===this.currentPage)return null}var n={hash:this.currentBookmark,page:this.currentPage};return this.isViewerInPresentationMode&&(n.hash=null),n},_stateObj:function(e){return{fingerprint:this.fingerprint,uid:this.uid,target:e}},_pushToHistory:function(e,t,n){if(this.initialized){if(!e.hash&&e.page&&(e.hash="page="+e.page),t&&!n){var i=this._getPreviousParams();if(i){var r=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(i,!1,r)}}this._pushOrReplaceState(this._stateObj(e),n||0===this.uid),this.currentUid=this.uid++,this.current=e,this.updatePreviousBookmark=!0}},_goTo:function(e){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(e)){if(!this.reInitialized&&e.uid<this.currentUid){var t=this._getPreviousParams(!0);if(t)return this._pushToHistory(this.current,!1),this._pushToHistory(t,!1),this.currentUid=e.uid,void window.history.back()}this.historyUnlocked=!1,e.target.dest?this.linkService.navigateTo(e.target.dest):this.linkService.setHash(e.target.hash),this.currentUid=e.uid,e.uid>this.uid&&(this.uid=e.uid),this.current=e.target,this.updatePreviousBookmark=!0;var n=window.location.hash.substring(1);this.previousHash!==n&&(this.allowHashChange=!1),this.previousHash=n,this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(e){if(this.initialized&&this.historyUnlocked){var t=window.history.state;e===-1&&t&&t.uid>0?window.history.back():1===e&&t&&t.uid<this.uid-1&&window.history.forward()}}},e}();PDFJS.PDFViewer=N,PDFJS.PDFPageView=S,PDFJS.PDFLinkService=w,PDFJS.TextLayerBuilder=E,PDFJS.DefaultTextLayerFactory=l,PDFJS.AnnotationLayerBuilder=I,PDFJS.DefaultAnnotationLayerFactory=c,PDFJS.PDFHistory=O,PDFJS.getFileName=e,PDFJS.ProgressBar=b}.call("undefined"==typeof window?void 0:window)}])});
//# sourceMappingURL=pdf-annotate.min.js.map